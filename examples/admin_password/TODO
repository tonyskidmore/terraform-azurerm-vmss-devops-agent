tony@DELL-XPS-15:~/github/terraform-azurerm-vmss-devops-agent/examples/admin_password$ terraform apply "tfplan"
module.terraform-azurerm-vmss-devops-agent.module.azure-devops-elasticpool.shell_script.ado_vmss_pool: Destroying... [id=cdokr00affoughugmj90]
module.terraform-azurerm-vmss-devops-agent.module.azure-devops-elasticpool.shell_script.ado_vmss_pool: Still destroying... [id=cdokr00affoughugmj90, 10s elapsed]
module.terraform-azurerm-vmss-devops-agent.module.azure-devops-elasticpool.shell_script.ado_vmss_pool: Still destroying... [id=cdokr00affoughugmj90, 20s elapsed]
╷
│ Error: Error occured during shell execution.
│ Error:
│ exit status 1
│
│ Command:
│ bash .terraform/modules/terraform-azurerm-vmss-devops-agent.azure-devops-elasticpool/scripts/ado_elastic_pool.sh delete
│
│ StdOut:
│ mode: deletestd_in: {"agentInteractiveUI":"false","azureId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg-tests-terraform-azurerm-vmss/providers/Microsoft.Compute/virtualMachineScaleSets/vmss-agent-pool-linux-001","desiredIdle":"0","desiredSize":"0","maxCapacity":"2","maxSavedNodeCount":"0","osType":"linux","poolId":"296","recycleAfterEachUse":"false","serviceEndpointId":"bef05c75-3b26-41d6-bd9f-de1e070145e0","serviceEndpointScope":"1ed30978-f28b-4dd9-9ead-81741b2673ac","sizingAttempts":"0","timeToLiveMinutes":"15"}method: DELETEurl: https://dev.azure.com/tonyskidmore/_apis/distributedtask/pools/296?api-version=7.1-preview.1curl --silent --show-error --max-time 20 --connect-timeout 20 --write-out \n%{http_code} --header Content-Type: application/json --request DELETE --user :*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************** https://dev.azure.com/tonyskidmore/_apis/distributedtask/pools/296?api-version=7.1-preview.1http_code: 000out:
│
│ StdErr:
│ curl: (28) Operation timed out after 20001 milliseconds with 0 bytes receivedOperation failed. Mode: delete, Method: DELETE, exit_code: 28, HTTP code: 000
│
│ Env:
│ [ADO_POOL_DESIRED_IDLE=0 ADO_POOL_AUTH_ALL_PIPELINES=True ADO_POOL_SIZING_ATTEMPTS=0 ADO_POOL_TTL_MINS=15 ADO_POOL_MAX_CAPACITY=2 ADO_PROJECT_ONLY=False AZ_VMSS_ID=/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg-tests-terraform-azurerm-vmss/providers/Microsoft.Compute/virtualMachineScaleSets/vmss-agent-pool-linux-001 ADO_ORG=https://dev.azure.com/tonyskidmore ADO_SERVICE_CONNECTION=demo-vmss ADO_POOL_MAX_SAVED_NODE_COUNT=0 ADO_PROJECT=demo-vmss ADO_POOL_DESIRED_SIZE=0 ADO_POOL_NAME=vmss-agent-pool-linux-001 ADO_POOL_RECYCLE_AFTER_USE=false ADO_POOL_AUTO_PROVISION=True ADO_POOL_OS_TYPE=linux]
│
│ StdIn:
│ '{"agentInteractiveUI":"false","azureId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg-tests-terraform-azurerm-vmss/providers/Microsoft.Compute/virtualMachineScaleSets/vmss-agent-pool-linux-001","desiredIdle":"0","desiredSize":"0","maxCapacity":"2","maxSavedNodeCount":"0","osType":"linux","poolId":"296","recycleAfterEachUse":"false","serviceEndpointId":"bef05c75-3b26-41d6-bd9f-de1e070145e0","serviceEndpointScope":"1ed30978-f28b-4dd9-9ead-81741b2673ac","sizingAttempts":"0","timeToLiveMinutes":"15"}'

# TODO: increase timeout on curl command, greater than 20 seconds
